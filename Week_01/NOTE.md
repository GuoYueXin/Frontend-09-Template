## 学习笔记

### TicTacToe

#### 思路

1. **绘制棋盘**
  
    棋盘格式由3*3的方格组成，可以使用二维数组对其进行抽象。每个方格有三种状态：**空**、**❌**、**⭕**

    数据结构如下：

      ```js
        // 0：空
        // 1: ⭕
        // 2: ❌
        const arr = [
          [1,0,0]
          [0,0,0]
          [0,0,2]
        ];

        // 也可以使用一位数组来表示
        // 使用一位数组，可以用其 元素下标/3 作为X坐标， 元素下标%3取余 作为Y坐标
        const arr = [
          1,0,0,
          0,0,0,
          0,0,2,
        ];
      ```

      通过设置每个方格元素的 ```display: inline-block```，由于 ```display: inline-block``` 的默认 ```vertcial-align: baseline```, 为了使其上下对齐，这里将其置为```vertcial-align: middle```, 并每插入三个方格插入一个换行元素 ```<br />```; 这里也可以使用 ```flex``` 布局。

2. **落子逻辑**
   
    点击所要落子的方格，首先判断该方格是否***已经被占用***以及游戏是否***已经结束***，不符合上述两个条件才可进行下面的逻辑。
    交替落子使用一个全局变量 ```flag``` 来表示，使用满足交换律的运算进行状态切换， 这里使用 ```flag = 3 - flag``` 进行交换。在每次渲染完后去改变 ```flag``` 的状态。

3. **添加判赢逻辑**

    > 赢的条件为：在横着三排或者竖着三排或者交叉两排中满足任意一排为同一个玩家，即为该玩家胜利。

    在每次落子之后，去调用一下判赢的逻辑，以此来校验玩家是否胜利。

4. **添加AI判断**
    
    **判断下一个玩家是否将会胜利**：在落子后，判断剩下的空格中是否有可以使下一个玩家胜利的方格，如果有的话，说明下一个玩家将会胜利，返回该位置的坐标，否则返回 ```null```。

    **获取某个玩家最好的落子方案**：当前玩家最好的落子方案就是可以胜利，其次对方的最优解为我们的最差解，即对方赢则代表我们输，反之亦然。所以我们只需要循环遍历所有空格中是否有可以使当前玩家胜利的位置，如果没有再判断是否有可以使对方胜利的位置，再其次就是可以使双方成为平局的位置，依次选取最优点即可。

5. **添加人机对战**

    再每次落子之后去判断下一个玩家的最优解进行落子即可。

### 异步

  1. **异步解决方案**

   - 回调函数：回调函数在嵌套过程中容易产生回调地狱，使逻辑复杂化。
   - Promise：通过Promise的then方法链式调用可以解决回调函数带来的回调地狱问题。
   - async/await：该方式可以使得Promise的使用更加简单、条理清晰。